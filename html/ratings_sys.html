<!DOCTYPE html>
<html>
<head>
  <title>Rating System</title>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }

    .rating-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 50px;
    }

    .product {
      margin-bottom: 20px;
    }

    .product-name {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .stars {
      color: yellow;
      font-size: 24px;
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
</head>
<body>
  <div class="rating-container" id="ratings-container"></div>

  <script>
    // Fetch the XML file
    fetch('https://raw.githubusercontent.com/RebeccaSkittles/XR/main/databases/ratings.xml')
      .then(response => response.text())
      .then(data => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(data, 'application/xml');
        
        // Get the ratings from the XML
        const products = xmlDoc.getElementsByTagName('product');
        
        // Loop through each product and generate the HTML code
        for (let i = 0; i < products.length; i++) {
          const id = products[i].getElementsByTagName('id')[0].textContent;
          const name = products[i].getElementsByTagName('name')[0].textContent;
          const ratings = products[i].getElementsByTagName('rating');
          const mostCommonRating = getMostCommonRating(ratings);
          
          const stars = getStarsHTML(mostCommonRating);
          
          // Generate the HTML code for the product
          const productHTML = `
            <div class="product">
              <h3 class="product-name">${name}</h3>
              <div class="stars">${stars}</div>
            </div>
          `;
          
          // Append the product HTML to the ratings container
          document.getElementById('ratings-container').innerHTML += productHTML;
        }
      });

    // Helper function to calculate the most common rating
    function getMostCommonRating(ratings) {
      const ratingCounts = {};
      
      // Count the occurrences of each rating
      for (let i = 0; i < ratings.length; i++) {
        const rating = ratings[i].textContent;
        if (ratingCounts[rating]) {
          ratingCounts[rating]++;
        } else {
          ratingCounts[rating] = 1;
        }
      }
      
      // Find the most common rating
      let mostCommonRating = '';
      let maxCount = 0;
      
      for (const rating in ratingCounts) {
        if (ratingCounts[rating] > maxCount) {
          mostCommonRating = rating;
          maxCount = ratingCounts[rating];
        }
      }
      
      return mostCommonRating;
    }

    // Helper function to generate the HTML code for the stars
    function getStarsHTML(rating) {
      const maxRating = 5;
      let starsHTML = '';
      
      for (let i = 1; i <= maxRating; i++) {
        if (i <= rating) {
          starsHTML += '<span class="star">&#9733;</span>'; // Yellow star character
        } else {
          starsHTML += '<span class="star">&#9734;</span>'; // Empty star character
        }
      }
      
      return starsHTML;
    }
  </script>
</body>
</html>
